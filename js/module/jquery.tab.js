/*!
 * jquery.tab.js
 *
 * @varsion   1.1
 * @require   jquery.js, jquery.cookie.js(if cookie:true)
 * @create    2012-10-29
 * @modify    2012-12-05 hash機能追加
 * @author    rin316 [Yuta Hayashi] - http://5am.jp/
 * @link      https://github.com/rin316/jquery.tab/
 */
;(function(d,b,e){var a,c;c={navItemSelector:"a",active:0,activeClass:"current",nonActiveClass:false,bodyWrapperClass:"mod-tab-bodyWrapper",cookie:false,cookieName:"mod-tab-cookie",hash:false,hashMoveDisabled:false,setClassChooseElement:false,setClassChooseElementSelector:"body",setClassChooseElementClass:"mod-activeItem-",speed:0,fixedHeight:"auto"};a=function(f,h){var g=this;g.o=d.extend({},c,h);g.$navItem=f.find(g.o.navItemSelector);g.$bodyItem=d();g.$navItem.each(function(){g.$bodyItem=d.merge(g.$bodyItem,(d(d(this).attr("href"))))});g.$bodyItem.wrapAll(d("<div/>",{"class":g.o.bodyWrapperClass}));g.$bodyWrapper=g.$bodyItem.parent();g.$allItem=g.$bodyItem.add(g.$navItem);g.$setClassChooseElement=d(g.o.setClassChooseElementSelector);g.hash=location.hash;g.index=g.o.active;g.isMoving=false;g.init();return g};(function(f){f.init=function(){var g=this;if(g.o.cookie&&d.cookie(g.o.cookieName)){g.index=d.cookie(g.o.cookieName)}if(g.o.fixedHeight==="max"){g.fixedHeight("max")}g.animate("init");g.indexUpdateUseHash(function(){g.animate("init");g.movePosition()});g.setClass();g.setClassChooseElement();g.eventify()};f.eventify=function(){var g=this;g.$navItem.on("click",function(i){i.preventDefault();var h=g.$navItem.index(this);if(!g.indexUpdate(h)){return false}if(g.o.cookie){d.cookie(g.o.cookieName,g.index)}g.setClass();g.setClassChooseElement();g.animate();if(g.o.fixedHeight==="auto"){g.fixedHeight("auto")}})};f.indexUpdateUseHash=function(h){if(this.o.hash&&this.hash){var g=this;g.$bodyItem.each(function(j){$this=d(this);if(g.hash===("#"+$this.attr("id"))){g.index=j;h();return false}})}};f.movePosition=function(){var h=this,i=d(b).scrollTop(),g;d(b).scrollTop(i+1);if(d("html").scrollTop()>0){g=d("html")}else{if(d("body").scrollTop()>0){g=d("body")}}d(b).scrollTop(i-1);if(h.o.hashMoveDisabled){setTimeout(function(){g.animate({scrollTop:0},0)},1)}else{var j=d(h.hash).offset().top;g.animate({scrollTop:j},0)}};f.indexUpdate=function(h){var g=this;if(!g.isMoving){if(g.index===h){return false}else{g.index=h;return true}}else{return false}};f.setClass=function(){var g=this;g.$allItem.removeClass(g.o.activeClass).addClass(g.o.nonActiveClass);g.$navItem.eq(g.index).addClass(g.o.activeClass).removeClass(g.o.nonActiveClass);g.$bodyItem.eq(g.index).addClass(g.o.activeClass).removeClass(g.o.nonActiveClass)};f.setClassChooseElement=function(){if(this.o.setClassChooseElement){var g=this,h;for(h=0;h<g.$navItem.length;h++){g.$setClassChooseElement.removeClass(g.o.setClassChooseElementClass+h)}g.$setClassChooseElement.addClass(g.o.setClassChooseElementClass+g.index)}};f.animate=function(h){var g=this;switch(h){case"init":g.$bodyItem.hide();g.$bodyItem.eq(g.index).show();break;default:g.isMoving=true;g.$bodyItem.each(function(){if(d(this).is(":visible")){d(this).fadeOut(g.o.speed,function(){g.$bodyItem.eq(g.index).fadeIn(g.o.speed,function(){g.isMoving=false})})}});break}};f.fixedHeight=function(){if(this.o.fixedHeight){var h=this,g=0;switch(h.o.fixedHeight){case"auto":h.isMoving=true;g=h.$bodyItem.eq(h.index).outerHeight();h.$bodyWrapper.animate({height:g},{duration:h.o.speed*2,complete:function(){h.isMoving=false;d(this).css({height:"auto"})}});break;case"max":h.$bodyItem.each(function(){g=Math.max(g,d(this).outerHeight())});if(navigator.userAgent.indexOf("MSIE 6")!=-1){h.$bodyWrapper.height(g)}else{h.$bodyWrapper.css({minHeight:g+"px"})}break}}}})(a.prototype);d.fn.tab=function(f){return this.each(function(){var g=d(this);g.data("tab",new a(g,f))})}})(jQuery,this);